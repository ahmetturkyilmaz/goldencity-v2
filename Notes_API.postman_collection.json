{
	"info": {
		"_postman_id": "notes-api-collection",
		"name": "Notes API",
		"description": "Complete CRUD API collection for Notes functionality\n\n**Authentication:**\nAll endpoints require authentication. You need to login first using the user authentication endpoints to get a JWT token stored in cookies.\n\n**Base URL:**\n- Local: http://localhost:3099\n- Update the `baseUrl` variable in the collection or environment\n\n**Endpoints:**\n1. POST /api/notes - Create a new note\n2. GET /api/notes - Get all notes for authenticated user\n3. GET /api/notes/:id - Get a specific note by ID\n4. PUT /api/notes/:id - Update a note by ID\n5. DELETE /api/notes/:id - Delete a note by ID",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register (Create Account)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Save token from response",
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    if (response.token) {",
									"        pm.environment.set(\"token\", response.token);",
									"        console.log(\"Token saved to environment:\", response.token);",
									"    }",
									"    ",
									"    // Also save user info",
									"    if (response.user) {",
									"        pm.environment.set(\"userId\", response.user._id || response.user.id);",
									"        console.log(\"User registered and logged in. User ID:\", response.user._id || response.user.id);",
									"    }",
									"}",
									"",
									"// Note: Token is also stored in cookies automatically by Postman"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"gender\": \"male\",\n  \"password\": \"password123\",\n  \"avatar\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/user/register",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"user",
								"register"
							]
						},
						"description": "**START HERE if you don't have an account!**\n\nRegister a new user account. After registration, you'll automatically receive a JWT token and be logged in.\n\n**Required Fields:**\n- name: User's full name\n- email: User's email address (must be unique)\n- gender: User's gender (e.g., \"male\", \"female\", \"other\")\n- password: User's password (minimum 8 characters)\n- avatar: Base64 encoded image or image URL\n\n**Note:** After successful registration, the token is automatically saved to cookies and environment variables, so you can immediately start using the Notes API endpoints."
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"gender\": \"male\",\n  \"password\": \"password123\",\n  \"avatar\": \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/api/user/register",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"user",
										"register"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "Set-Cookie",
									"value": "token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...; HttpOnly"
								}
							],
							"cookie": [
								{
									"name": "token",
									"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
									"httpOnly": true
								}
							],
							"body": "{\n  \"success\": true,\n  \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1ODFiYzEyMzQ1Njc4OTBhYmNkZWYiLCJpYXQiOjE3MDI4NzY1NDAsImV4cCI6MTcwMjk2Mjk0MH0.abc123def456\",\n  \"user\": {\n    \"_id\": \"6581bc1234567890abcdef\",\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"role\": \"user\",\n    \"avatar\": {\n      \"public_id\": \"avatars/xyz\",\n      \"url\": \"https://res.cloudinary.com/...\"\n    },\n    \"createdAt\": \"2024-01-15T10:00:00.000Z\"\n  }\n}"
						}
					]
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Save token from response",
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    if (response.token) {",
									"        pm.environment.set(\"token\", response.token);",
									"        console.log(\"Token saved to environment:\", response.token);",
									"    }",
									"    ",
									"    // Also save user info",
									"    if (response.user) {",
									"        pm.environment.set(\"userId\", response.user._id || response.user.id);",
									"    }",
									"}",
									"",
									"// Note: Token is also stored in cookies automatically by Postman"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/user/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"user",
								"login"
							]
						},
						"description": "Login with existing account to get JWT token.\n\n**If you don't have an account:** Use the \"Register (Create Account)\" request above first.\n\nThe token is returned in both:\n- Response body (`token` field)\n- HTTP-only cookie (`token` cookie)\n\n**Note:** Postman automatically handles cookies, so after login, all subsequent requests will include the token cookie.\n\n**Required Fields:**\n- email: User email address\n- password: User password"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/api/user/login",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"user",
										"login"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								},
								{
									"key": "Set-Cookie",
									"value": "token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...; HttpOnly"
								}
							],
							"cookie": [
								{
									"name": "token",
									"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
									"httpOnly": true
								}
							],
							"body": "{\n  \"success\": true,\n  \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY1ODFiYzEyMzQ1Njc4OTBhYmNkZWYiLCJpYXQiOjE3MDI4NzY1NDAsImV4cCI6MTcwMjk2Mjk0MH0.abc123def456\",\n  \"user\": {\n    \"_id\": \"6581bc1234567890abcdef\",\n    \"name\": \"John Doe\",\n    \"email\": \"user@example.com\",\n    \"role\": \"user\",\n    \"avatar\": {\n      \"public_id\": \"avatars/xyz\",\n      \"url\": \"https://res.cloudinary.com/...\"\n    },\n    \"createdAt\": \"2024-01-15T10:00:00.000Z\"\n  }\n}"
						},
						{
							"name": "Invalid Credentials",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"wrong@example.com\",\n  \"password\": \"wrongpassword\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseUrl}}/api/user/login",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"api",
										"user",
										"login"
									]
								}
							},
							"status": "Unauthorized",
							"code": 401,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n  \"success\": false,\n  \"message\": \"Invalid Email or Password\"\n}"
						}
					]
				}
			],
			"description": "Authentication endpoints to get JWT token for accessing protected routes."
		},
		{
			"name": "Create Note",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Automatically save noteId from response",
							"if (pm.response.code === 201) {",
							"    const response = pm.response.json();",
							"    if (response.note && response.note._id) {",
							"        pm.environment.set(\"noteId\", response.note._id);",
							"        console.log(\"Note ID saved:\", response.note._id);",
							"    }",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"title\": \"My First Note\",\n  \"content\": \"This is the content of my note. Content is optional.\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/api/notes",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"notes"
					]
				},
				"description": "Create a new note. Title is required, content is optional.\n\n**Validation:**\n- Title: Required, 1-50 characters, cannot be empty or whitespace only\n- Content: Optional, max 500 characters, cannot be whitespace only if provided\n\n**Note:** The noteId is automatically saved to the environment variable after successful creation."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"My First Note\",\n  \"content\": \"This is the content of my note.\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/notes",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notes"
							]
						}
					},
					"status": "OK",
					"code": 201,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"success\": true,\n  \"message\": \"Note created successfully\",\n  \"note\": {\n    \"_id\": \"507f1f77bcf86cd799439011\",\n    \"user\": \"507f191e810c19729de860ea\",\n    \"title\": \"My First Note\",\n    \"content\": \"This is the content of my note.\",\n    \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n    \"updatedAt\": \"2024-01-15T10:30:00.000Z\"\n  }\n}"
				},
				{
					"name": "Validation Error",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/notes",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notes"
							]
						}
					},
					"status": "Bad Request",
					"code": 400,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"success\": false,\n  \"message\": \"Title cannot be empty\"\n}"
				}
			]
		},
		{
			"name": "Get All Notes",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/notes",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"notes"
					]
				},
				"description": "Get all notes for the authenticated user. Notes are sorted by creation date (newest first)."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/notes",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notes"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"success\": true,\n  \"count\": 2,\n  \"notes\": [\n    {\n      \"_id\": \"507f1f77bcf86cd799439011\",\n      \"user\": \"507f191e810c19729de860ea\",\n      \"title\": \"My Second Note\",\n      \"content\": \"Another note content\",\n      \"createdAt\": \"2024-01-15T11:00:00.000Z\",\n      \"updatedAt\": \"2024-01-15T11:00:00.000Z\"\n    },\n    {\n      \"_id\": \"507f1f77bcf86cd799439012\",\n      \"user\": \"507f191e810c19729de860ea\",\n      \"title\": \"My First Note\",\n      \"content\": \"This is the content of my note.\",\n      \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n      \"updatedAt\": \"2024-01-15T10:30:00.000Z\"\n    }\n  ]\n}"
				}
			]
		},
		{
			"name": "Get Note by ID",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/notes/:id",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"notes",
						":id"
					],
					"variable": [
						{
							"key": "id",
							"value": "{{noteId}}",
							"description": "Note ID (MongoDB ObjectId)"
						}
					]
				},
				"description": "Get a specific note by ID. Only returns the note if it belongs to the authenticated user."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/notes/507f1f77bcf86cd799439011",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notes",
								"507f1f77bcf86cd799439011"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"success\": true,\n  \"note\": {\n    \"_id\": \"507f1f77bcf86cd799439011\",\n    \"user\": \"507f191e810c19729de860ea\",\n    \"title\": \"My First Note\",\n    \"content\": \"This is the content of my note.\",\n    \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n    \"updatedAt\": \"2024-01-15T10:30:00.000Z\"\n  }\n}"
				},
				{
					"name": "Note Not Found",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/notes/507f1f77bcf86cd799439999",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notes",
								"507f1f77bcf86cd799439999"
							]
						}
					},
					"status": "Not Found",
					"code": 404,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"success\": false,\n  \"message\": \"Note with ID 507f1f77bcf86cd799439999 not found\"\n}"
				}
			]
		},
		{
			"name": "Update Note",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"title\": \"Updated Note Title\",\n  \"content\": \"Updated content of the note\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{baseUrl}}/api/notes/:id",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"notes",
						":id"
					],
					"variable": [
						{
							"key": "id",
							"value": "{{noteId}}",
							"description": "Note ID (MongoDB ObjectId)"
						}
					]
				},
				"description": "Update a note by ID. At least one field (title or content) must be provided.\n\n**Partial Updates:**\nYou can update only title, only content, or both fields.\n\n**Validation:**\n- Title: 1-50 characters, cannot be empty or whitespace only\n- Content: Optional, max 500 characters, cannot be whitespace only if provided"
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"Updated Note Title\",\n  \"content\": \"Updated content\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/notes/507f1f77bcf86cd799439011",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notes",
								"507f1f77bcf86cd799439011"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"success\": true,\n  \"message\": \"Note updated successfully\",\n  \"note\": {\n    \"_id\": \"507f1f77bcf86cd799439011\",\n    \"user\": \"507f191e810c19729de860ea\",\n    \"title\": \"Updated Note Title\",\n    \"content\": \"Updated content of the note\",\n    \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n    \"updatedAt\": \"2024-01-15T12:00:00.000Z\"\n  }\n}"
				},
				{
					"name": "Update Title Only",
					"originalRequest": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"title\": \"Only Title Updated\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/notes/507f1f77bcf86cd799439011",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notes",
								"507f1f77bcf86cd799439011"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"success\": true,\n  \"message\": \"Note updated successfully\",\n  \"note\": {\n    \"_id\": \"507f1f77bcf86cd799439011\",\n    \"user\": \"507f191e810c19729de860ea\",\n    \"title\": \"Only Title Updated\",\n    \"content\": \"This is the content of my note.\",\n    \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n    \"updatedAt\": \"2024-01-15T12:05:00.000Z\"\n  }\n}"
				}
			]
		},
		{
			"name": "Delete Note",
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "{{baseUrl}}/api/notes/:id",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"api",
						"notes",
						":id"
					],
					"variable": [
						{
							"key": "id",
							"value": "{{noteId}}",
							"description": "Note ID (MongoDB ObjectId)"
						}
					]
				},
				"description": "Delete a note by ID. Only deletes the note if it belongs to the authenticated user."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/notes/507f1f77bcf86cd799439011",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notes",
								"507f1f77bcf86cd799439011"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"success\": true,\n  \"message\": \"Note deleted successfully\"\n}"
				},
				{
					"name": "Note Not Found",
					"originalRequest": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/notes/507f1f77bcf86cd799439999",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"notes",
								"507f1f77bcf86cd799439999"
							]
						}
					},
					"status": "Not Found",
					"code": 404,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n  \"success\": false,\n  \"message\": \"Note with ID 507f1f77bcf86cd799439999 not found\"\n}"
				}
			]
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3099",
			"type": "string"
		},
		{
			"key": "noteId",
			"value": "",
			"type": "string",
			"description": "Store the note ID from create/update responses to use in other requests"
		}
	]
}

